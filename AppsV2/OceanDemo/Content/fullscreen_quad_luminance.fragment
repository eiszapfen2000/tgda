#version 150
#extension GL_ARB_explicit_attrib_location : enable

in vec2 texcoordsOut;
layout(location = 0) out float color;

const mat3 LinearsRGBToXYZ
    = mat3( 0.4124564f, 0.2126729f, 0.0193339f,
            0.3575761f, 0.7151522f, 0.1191920f,
            0.1804375f, 0.0721750f, 0.9503041f );

void main()
{
    vec4 c = texture2D(colormap, texcoordsOut);
    vec3 XYZ = LinearsRGBToXYZ * c.rgb;
    color = max(log(XYZ.y), 0.01f);
    //color = XYZ.y;
}

