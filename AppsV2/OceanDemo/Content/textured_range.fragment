#version 150

in vec2 out_texcoords;

void main()
{
    vec4 sample = texture(colormap, vec2(out_texcoords.x, 1.0 - out_texcoords.y));

    float vRange = range.y - range.x;
    vec4 rescaled = (sample - range.x) / vRange;
    vec4 masked = rescaled * mask;
    float r = masked.x + masked.y + masked.z + masked.w;

    target = vec4(vec3(r), 1.0);
}
