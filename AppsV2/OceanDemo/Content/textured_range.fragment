#version 150

in vec2 out_texcoords;

void main()
{
    vec4 sample = texture(colormap, vec2(out_texcoords.x, 1.0 - out_texcoords.y));
    sample = sample * mask;
    float v = sample.x + sample.y + sample.z + sample.w;
    vec4 result = ( v < 0.0 ) ? vec4(abs(v) / abs(range.x), 0.0, 0.0, 1.0) : vec4(0.0, abs(v) / abs(range.y), 0.0, 1.0);
    
	target = result;
}
